# vim:fileencoding=utf-8:foldmethod=marker

# ========================================
# TEMA
# ========================================
# Tokyo Night - Puedes cambiar el archivo de tema
include current-theme.conf

# ========================================
# FUENTES
# ========================================
# Fuente principal con soporte para iconos
font_family        JetBrainsMono Nerd Font
bold_font          auto
italic_font        auto
bold_italic_font   auto
# Tamaño de fuente en puntos
font_size          10.0

# Activar ligaduras de programación
enable_ligatures   yes

# Features tipográficas avanzadas
font_features      JetBrainsMono Nerd Font +zero +calt +ss01 +ss02 +cv01 +cv02 +cv03 +cv04 +cv05 +cv06 +frac +subs +sups +sinf

# Fuente para emojis
symbol_map U+1F300-U+1F6FF Noto Color Emoji

# ========================================
# CURSOR
# ========================================
# Color del cursor
cursor #ffffff
cursor_text_color background
# Forma: beam (|), block (█), underline (_)
cursor_shape beam
cursor_shape_unfocused hollow
cursor_beam_thickness 1.5
# 0 = no parpadea
cursor_blink_interval 0
cursor_stop_blinking_after 0
cursor_trail 0

# ========================================
# SCROLLBACK
# ========================================
# Líneas de historial (10k para data science)
scrollback_lines 10000
scrollback_indicator_opacity 0.7
scrollback_pager less --chop-long-lines --RAW-CONTROL-CHARS +INPUT_LINE_NUMBER
scrollback_pager_history_size 10
scrollback_fill_enlarged_window no
wheel_scroll_multiplier 3.0
wheel_scroll_min_lines 1
touch_scroll_multiplier 1.0

# ========================================
# MOUSE
# ========================================
# -1 = nunca ocultar cursor
mouse_hide_wait -1.0
url_color #0087bd
url_style curly
open_url_with default
url_prefixes file ftp ftps gemini git gopher http https irc ircs kitty mailto news sftp ssh
detect_urls yes
show_hyperlink_targets yes
underline_hyperlinks hover

# Importante para copiar resultados en data science
copy_on_select yes
clear_selection_on_clipboard_loss no
paste_actions quote-urls-at-prompt,confirm
# smart = solo líneas modificadas
strip_trailing_spaces smart

# Caracteres que forman una palabra
select_by_word_characters @-./_~?&=%+#
select_by_word_characters_forward
click_interval -1.0
focus_follows_mouse no
pointer_shape_when_grabbed arrow
default_pointer_shape beam
pointer_shape_when_dragging beam

# ========================================
# PERFORMANCE
# ========================================
input_delay 3
sync_to_monitor yes

# ========================================
# CONFIGURACIÓN PARA TMUX 
# ========================================
# Desactivamos remote control ya que usaremos tmux
allow_remote_control no

# Integración con clipboard (tmux manejará esto)
clipboard_control write-clipboard write-primary read-clipboard read-primary

# ========================================
# VENTANAS - CONFIGURACIÓN MÍNIMA
# ========================================
remember_window_size  yes
initial_window_width  1200
initial_window_height 800

# Layout simple ya que tmux manejará splits
enabled_layouts stack

window_resize_step_cells 2
window_resize_step_lines 2
window_border_width 1pt
draw_minimal_borders yes
window_margin_width 0
single_window_margin_width -1
window_padding_width 5
placement_strategy center

# Colores de bordes (menos importantes con tmux)
active_border_color #7aa2f7
inactive_border_color #3b4252
bell_border_color #ff9e64

inactive_text_alpha 0.7
hide_window_decorations no
window_logo_path none
window_logo_position bottom-right
window_logo_alpha 0.5
resize_debounce_time 0.1 0.5
resize_in_steps no
visual_window_select_characters 1234567890ABCDEFGHIJKLMNOPQRSTUVWXYZ
confirm_os_window_close 0

# ========================================
# TABS - CONFIGURACIÓN MÍNIMA
# ========================================
# Tmux manejará las "tabs" como ventanas
tab_bar_edge top
tab_bar_margin_width 0.0
tab_bar_margin_height 3.0 0.0
tab_bar_style powerline
tab_bar_align left
tab_switch_strategy previous
tab_fade 0.25 0.5 0.75 1
tab_separator " ┇"
tab_powerline_style slanted
tab_activity_symbol 
tab_title_max_length 20
tab_title_template "{fmt.fg.red}{bell_symbol}{activity_symbol}{fmt.fg.tab}{title}"
active_tab_title_template "{fmt.fg.red}{bell_symbol}{activity_symbol}{fmt.fg.tab}{title}"

# Colores de tabs
active_tab_foreground   #1a1b26
active_tab_background   #7aa2f7
inactive_tab_foreground #a9b1d6
inactive_tab_background #3b4252
tab_bar_background #1a1b26
tab_bar_margin_color none

# ========================================
# COLORES DE MARCAS
# ========================================
mark1_foreground black
mark1_background #98d3cb
mark2_foreground black
mark2_background #f2dcd3
mark3_foreground black
mark3_background #f274bc

# ========================================
# TRANSPARENCIA Y BLUR
# ========================================
background_opacity 0.85
dynamic_background_opacity yes

# ========================================
# AUDIO Y NOTIFICACIONES
# ========================================
enable_audio_bell no
visual_bell_duration 0.0
window_alert_on_bell yes
bell_on_tab " "

# ========================================
# CONFIGURACIÓN ESPECÍFICA POR OS
# ========================================
# macOS
macos_titlebar_color system
macos_option_as_alt yes
macos_quit_when_last_window_closed yes
macos_thicken_font 0.15
macos_traditional_fullscreen no
macos_show_window_title_in none
hide_window_decorations titlebar-only

# Linux (Arch - Wayland/X11)
linux_display_server auto
wayland_titlebar_color system

# ========================================
# PERFORMANCE Y RENDERING
# ========================================
repaint_delay 10

# ========================================
# CONFIGURACIÓN AVANZADA
# ========================================
# Usar shell por defecto (tmux se iniciará desde aquí)
shell .
editor nvim
close_on_child_death no
update_check_interval 24
startup_session none
clipboard_max_size 512
allow_hyperlinks yes
shell_integration enabled
allow_cloning ask
clone_source_strategies venv,conda,env_var,path
notify_on_cmd_finish never
forward_stdio no

# ========================================
# ATAJOS DE TECLADO SIMPLIFICADOS
# ========================================
# Limpiar atajos por defecto
clear_all_shortcuts yes

# Clipboard básicos
map ctrl+shift+c copy_to_clipboard
map ctrl+shift+v paste_from_clipboard

# Scrolling básico
map ctrl+shift+up scroll_line_up
map ctrl+shift+down scroll_line_down
map ctrl+shift+page_up scroll_page_up
map ctrl+shift+page_down scroll_page_down
map ctrl+shift+home scroll_home
map ctrl+shift+end scroll_end
map ctrl+shift+h show_scrollback
map ctrl+shift+g show_last_command_output

# Solo los atajos de ventana más básicos (tmux manejará splits)
map ctrl+shift+enter new_window
map ctrl+shift+n new_os_window
map ctrl+shift+w close_window

# Tamaño de fuente
map ctrl+shift+equal change_font_size all +1.0
map ctrl+shift+plus change_font_size all +1.0
map ctrl+shift+minus change_font_size all -1.0
map ctrl+shift+backspace change_font_size all 0

# Funciones especiales
map ctrl+shift+f11 toggle_fullscreen
map ctrl+shift+f10 toggle_maximized
map ctrl+shift+u kitten unicode_input
map ctrl+shift+f2 edit_config_file
map ctrl+shift+escape kitty_shell window
map ctrl+shift+delete clear_terminal reset active
map ctrl+shift+f5 load_config_file
map ctrl+shift+f6 debug_config

# Transparencia
map ctrl+shift+a>m set_background_opacity +0.1
map ctrl+shift+a>l set_background_opacity -0.1
map ctrl+shift+a>1 set_background_opacity 1
map ctrl+shift+a>d set_background_opacity default
